<treecontrol class="tree-classic"
             tree-model="tree"
             expanded-nodes="expandedNodes" options="treeOptions">
    <div class="read-list-category-item" ng-click="onClickHandler($event)"
         ng-class="{'read-list-category-item_can-expand': node.children.length}"
         ng-init="categorySettings={}; categorySettings.description = node.description; categorySettings.name = node.name; categorySettings.state = 'read'">

        <div class="read-list-category-item__tree-actions" ng-if="node.children.length">
            <button ng-if="node.children.length && !isCategoryExpanded(node)" class="btn btn-link"
                    ng-click="expandCategory(node)">+
            </button>
            <button ng-if="node.children.length && isCategoryExpanded(node)" class="btn btn-link"
                    ng-click="collapseCategory(node)">-
            </button>
        </div>

        <div class="read-list-category-item__preview" ng-if="categorySettings.state === 'read'">
            <span>{{node.name}}</span>
            <button class="btn btn-primary"
                    ng-if="categorySettings.state = 'read'"
                    ng-click="categorySettings.state = 'edit'">Edit
            </button>
        </div>

        <div class="read-list-category-item__edit" ng-if="categorySettings.state === 'edit'">
            <form>
                <div class="form-group">
                    <input type="text" name="name" ng-model="categorySettings.name" class="form-control"
                           placeholder="Category name"
                           required>
                </div>

                <div class="form-group">
                    <textarea type="text" name="description" ng-model="categorySettings.description"
                              class="form-control"
                              placeholder="Description">
                    </textarea>
                </div>

                <div class="read-list-category-item__edit-action-buttons">
                    <div>
                        <button class="btn btn-primary"
                                ng-click="save(node._id, categorySettings.name, categorySettings.description)">Save
                        </button>
                        <button
                                ng-click="categorySettings.description = node.description; categorySettings.name = node.name; categorySettings.state = 'read'"
                                class="btn btn-link" ng-click="cancel(node)">Cancel
                        </button>
                    </div>

                    <button class="btn btn-danger" ng-click="removeCategory(node)">Delete</button>
                </div>

            </form>
        </div>
    </div>
</treecontrol>